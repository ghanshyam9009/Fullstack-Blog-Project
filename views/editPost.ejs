<%- include('partials/header', { title: 'Edit Post', user: user }) %>

<div class="container mt-5">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0">Edit Post</h2>
    </div>
    <div class="card-body">
      <form
        action="/posts/<%= post._id %>?_method=PUT"
        method="POST"
        enctype="multipart/form-data"
      >
        <div class="mb-3">
          <label for="title" class="form-label">Title</label>
          <input
            type="text"
            class="form-control"
            name="title"
            id="title"
            value="<%= post.title %>"
            required
          />
        </div>
        <div class="mb-3">
          <label for="content" class="form-label">Content</label>
          <textarea
            class="form-control"
            name="content"
            id="content"
            rows="5"
            required
          ><%= post.content %></textarea>
        </div>
        <div class="mb-3">
          <label for="images" class="form-label">Images</label>
          <input
            type="file"
            class="form-control"
            name="images"
            id="images"
            multiple
          />
          <div class="mt-3">
            <% post.images.forEach(image => { %>
            <img
              src="<%= image.url %>"
              alt="Post Image"
              class="img-thumbnail me-2"
              style="max-width: 150px"
            />
            <% }) %>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-save"></i> Update Post
        </button>
      </form>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
